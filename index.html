<!DOCTYPE html>

<html>

<head>
    <title>Robo Racer</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="../libs/jquery.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jersey+15&display=swap" rel="stylesheet">

    <script type="importmap">
          { "imports": { "three": "../libs/three.module.js" } }
    </script>

    <script type="module" src="./RoboRacer.js"></script>
    <script type="module" src="./funciones_HUD.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
    <link rel="stylesheet" href="estilos_HUD.css">
</head>

<body>

    <audio id="audio-background" autoplay loop>
        <source src="Helldivers 2 Main Theme - A Cup Of Liber-Tea.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <video id="video-background" autoplay="true" muted="true" loop="true">
        <source src="./imgs/menu.mp4" type="video/mp4">
        Iphone doesn't support this cool video :(
    </video>

    <div id="menu">
        <h3>Cargando ...</h3>
        <div class="carga" id="carga">
            <div class="carga__barra" id="carga__barra"></div>
        </div>
        <div class="trans">
            <h1>Robo Racer</h1>
        </div>
        <button id="start">LET'S GOOO</button>
        <button id="play-button">Sonido ðŸ”ˆ</button>
    </div>

    <!-- Div which will hold the Output -->
    <div id="WebGL-output">
        <!--HUD DE INVESTIGACIÃ“N-->
        <div class="barra_investigacion">
            <h2>Barra de investigaciÃ³n (0%) </h2>
            <div class="progreso_container">
                <div class="progreso"></div>
            </div>
        </div>
        <!--HUD DE VIDA-->
        <div class="barra_vidas">
            <h2>Barra de vida:</h2>
            <div class="vida_container">
                <img class="vida" src="./imgs/corazon.png">
                <img class="vida" src="./imgs/corazon.png">
                <img class="vida" src="./imgs/corazon.png">
                <img class="vida" src="./imgs/corazon.png">
                <img class="vida" src="./imgs/corazon.png">
                <img class="vida" src="./imgs/corazon.png">
            </div>
        </div>
        <!--HUD DE MISION-->
        <div class="mision">
            <h1 id="vueltas" style="color:white;"> ( 0 / 3 ) </h1>
            <p>La misiÃ³n consiste en terminar las tres vueltas del circuito habiendo completado la barra de
                investigaciÃ³n. Confiamos en ti.</p>
        </div>
    </div>

    <script type="text/javascript">
        //Al pulsar el boton start baja el menu y empieza el juego
        $("#start").click(function () {
            $("#menu").slideUp();
        });

        document.getElementById('play-button').addEventListener('click', function () {
            document.getElementById('audio-background').play();
        });

        //Desactivar los botones hasta que este cargado

        document.getElementById('start').disabled = true;
        document.getElementById('start').style.cursor = 'not-allowed';
        document.getElementById('start').style.backgroundColor = 'gray';

        document.getElementById('play-button').disabled = true;
        document.getElementById('play-button').style.cursor = 'not-allowed';
        document.getElementById('play-button').style.backgroundColor = 'gray';

        //Carga de la pagina
        var carga = document.getElementById('carga__barra');
        var porcentaje = 0;
        var intervalo = setInterval(function () {
            porcentaje += 10;
            carga.style.width = porcentaje + '%';
            if (porcentaje == 100) {
                clearInterval(intervalo);
            }
        }, 50);

        //Activar los botones cuando este cargado
        setTimeout(function () {
            document.getElementById('start').disabled = false;
            document.getElementById('play-button').disabled = false;

            document.getElementById('start').style.cursor = 'pointer';
            document.getElementById('start').style.backgroundColor = '#0f7f9b';

            document.getElementById('play-button').style.cursor = 'pointer';
            document.getElementById('play-button').style.backgroundColor = '#0f7f9b';

        }, 3000);


    </script>

</body>

</html>